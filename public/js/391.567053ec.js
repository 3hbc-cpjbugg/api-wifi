"use strict";(globalThis["webpackChunkclinica"]=globalThis["webpackChunkclinica"]||[]).push([[391],{7391:(e,l,o)=>{o.r(l),o.d(l,{default:()=>R});o(6809);var a=o(2852),t=o(3100),i=o(5124),n=o(9006),s=o(4975),u=o(4004),d=o(726);o(2159);const r={class:"row"},c=(0,a.Lk)("div",{class:"col col-2"},[(0,a.Lk)("p",{style:{"font-weight":"bold","font-size":"18px"}},"Sitios")],-1),p={class:"col row col-10",style:{gap:"20px"}},m={class:"text-left"},b=(0,a.Lk)("div",{class:"text-h6"},"Sitio",-1),g={class:"row",style:{}},_={class:"col col-6",style:{padding:"0 10px"}},v={class:"col col-6",style:{padding:"0 10px"}},f=(0,a.Lk)("span",{class:"q-ml-sm"},"Estas seguro de eliminar este sitio?",-1),y={__name:"Sites",setup(e){const l=(0,s.n)(),o=(0,i.KR)([]),y=(0,i.KR)(null),k=(0,i.KR)(!1),V=(0,i.KR)(!1),F=(0,i.KR)({proyecto:2,nombre_sitio:"",calle_sitio:"",numero_sitio:0,colonia_sitio:"",municipio_sitio:"",estado_sitio:"",cp_sitio:"",latitud_sitio:"",longitud_sitio:""});function w(e){y.value=e,V.value=!0}async function h(){try{const{data:e}=await d.api.get("sites");e.success||(o.value=e.data,e.data.map(((e,l)=>{e.proyecto&&U.value.push(e.proyecto)})))}catch(e){this.q.notify({message:"El correo electrónico  y/o contraseña son incorrectos",color:"negative",position:"top-right",icon:"report_problem"})}}function x(e){F.value=e,k.value=!0}async function C(){try{const{data:e}=await d.api.delete(`sites/${y.value.id}`);I.notify({message:"Se eliminó el sitio correctamente",color:"positive",position:"bottom-right",icon:"check_circle"}),V.value=!1,h()}catch(e){I.notify({message:"Error al eliminar el sitio",color:"negative",position:"top-right",icon:"report_problem"})}}async function q(){try{let e=null;e=F.value.id?await d.api.put(`sites/${F.value.id}`,F.value):await d.api.post("sites",F.value),I.notify({message:"Se guardó el sitio correctamente",color:"positive",position:"bottom-right",icon:"check_circle"}),k.value=!1,h()}catch(e){I.notify({message:"Error al guardar el sitio",color:"negative",position:"top-right",icon:"report_problem"})}}(0,a.sV)((async()=>{await h()}));const A=[{name:"id",required:!0,label:"No",align:"left",field:e=>e.id,format:e=>`${e}`,sortable:!0},{name:"nombre_sitio",align:"center",label:"Nombre sitio",field:"nombre_sitio",sortable:!0},{name:"calle_sitio",label:"Calle",field:"calle_sitio",sortable:!0},{name:"numero_sitio",label:"Número",field:"numero_sitio"},{name:"colonia_sitio",label:"Colonia",field:"colonia_sitio"},{name:"municipio_sitio",label:"Municipio",field:"municipio_sitio"},{name:"estado_sitio",label:"Estado",field:"estado_sitio",sortable:!0,sort:(e,l)=>parseInt(e,10)-parseInt(l,10)},{name:"cp_sitio",label:"C.P.",field:"cp_sitio",sortable:!0,sort:(e,l)=>parseInt(e,10)-parseInt(l,10)},{name:"latitud_sitio",label:"Latitud",field:"latitud_sitio",sortable:!0,sort:(e,l)=>parseInt(e,10)-parseInt(l,10)},{name:"longitud_sitio",label:"Longitud",field:"longitud_sitio",sortable:!0,sort:(e,l)=>parseInt(e,10)-parseInt(l,10)},{name:"action",label:"Opciones",field:"action",sortable:!0,sort:(e,l)=>parseInt(e,10)-parseInt(l,10)}],L=(0,i.KR)("Todos"),U=(0,i.KR)(["Todos"]),I=(0,u.A)();function Q(){return I.screen.lt.sm?3:I.screen.lt.md?6:9}(0,i.KR)("");const P=(0,i.KR)({page:1,rowsPerPage:Q()});return(0,a.wB)((()=>I.screen.name),(()=>{P.value.rowsPerPage=Q()})),(0,a.EW)((()=>I.screen.gt.xs?I.screen.gt.sm?[3,6,9]:[3,6]:[3])),(e,s)=>{const u=(0,a.g2)("q-space"),d=(0,a.g2)("q-select"),y=(0,a.g2)("q-icon"),h=(0,a.g2)("q-input"),I=(0,a.g2)("q-btn"),Q=(0,a.g2)("q-td"),S=(0,a.g2)("q-tr"),K=(0,a.g2)("q-table"),R=(0,a.g2)("q-card"),E=(0,a.g2)("q-card-section"),T=(0,a.g2)("q-card-actions"),N=(0,a.g2)("q-dialog"),z=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(R,{class:"shadow-1 q-pa-lg q-mt-sm",style:(0,t.Tr)(`background-color:${(0,i.R1)(l).configuration.secondary_color}`),outlined:""},{default:(0,a.k6)((()=>[(0,a.Lk)("div",r,[c,(0,a.Lk)("div",p,[(0,a.bF)(u),(0,a.bF)(d,{outlined:"",dense:"",label:"Proyectos",style:{width:"250px"},options:U.value,modelValue:L.value,"onUpdate:modelValue":s[0]||(s[0]=e=>L.value=e)},null,8,["options","modelValue"]),(0,a.bF)(h,{placeholder:"Buscar",size:"md",flat:"",dense:"",outlined:"",icon:"Search Site"},{append:(0,a.k6)((()=>[(0,a.bF)(y,{name:"search"})])),_:1}),(0,a.bF)(I,{color:"blue",size:"md",outline:"",onClick:s[1]||(s[1]=e=>k.value=!0),label:"Agregar Nuevo Sitio",icon:"add"})])]),(0,a.bF)(K,{flat:"",bordered:"",rows:o.value,columns:A,"row-key":"name",separator:e.separator,class:"q-mt-md",pagination:P.value,"onUpdate:pagination":s[2]||(s[2]=e=>P.value=e),"rows-per-page-options":e.rowsPerPageOptions},{body:(0,a.k6)((e=>[(0,a.bF)(S,{props:e},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.cols.filter((e=>"action"!==e.name)),(l=>((0,a.uX)(),(0,a.Wv)(Q,{key:l.name,props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,t.v_)(l.value),1)])),_:2},1032,["props"])))),128)),(0,a.bF)(Q,{"auto-width":""},{default:(0,a.k6)((()=>[(0,a.bF)(I,{icon:"edit_note",color:"blue",flat:"",onClick:l=>x(e.row),dense:""},null,8,["onClick"]),(0,a.bF)(I,{icon:"delete",color:"red",flat:"",dense:"",onClick:l=>w(e.row)},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["props"]),(0,a.bo)((0,a.bF)(S,{props:e},{default:(0,a.k6)((()=>[(0,a.bF)(Q,{colspan:"100%"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",m,"This is expand slot for row above: "+(0,t.v_)(e.row.name)+".",1)])),_:2},1024)])),_:2},1032,["props"]),[[n.aG,e.expand]])])),_:1},8,["rows","separator","pagination","rows-per-page-options"])])),_:1},8,["style"]),(0,a.bF)(N,{modelValue:k.value,"onUpdate:modelValue":s[13]||(s[13]=e=>k.value=e)},{default:(0,a.k6)((()=>[(0,a.bF)(R,{style:{width:"700px","max-width":"80vw"}},{default:(0,a.k6)((()=>[(0,a.bF)(E,null,{default:(0,a.k6)((()=>[b])),_:1}),(0,a.bF)(E,{class:"q-pt-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",g,[(0,a.Lk)("div",_,[(0,a.bF)(h,{outlined:"",dense:"",mask:"#","lazy-rules":"",modelValue:F.value.proyecto,"onUpdate:modelValue":s[3]||(s[3]=e=>F.value.proyecto=e),label:"Proyectos",style:{"margin-bottom":"20px"}},null,8,["modelValue"]),(0,a.bF)(h,{outlined:"",dense:"",label:"CP",modelValue:F.value.cp_sitio,"onUpdate:modelValue":s[4]||(s[4]=e=>F.value.cp_sitio=e),style:{"margin-bottom":"20px"}},null,8,["modelValue"]),(0,a.bF)(h,{outlined:"",dense:"",label:"Numero",modelValue:F.value.numero_sitio,"onUpdate:modelValue":s[5]||(s[5]=e=>F.value.numero_sitio=e),style:{"margin-bottom":"20px"}},null,8,["modelValue"]),(0,a.bF)(h,{outlined:"",dense:"",label:"Municipio",modelValue:F.value.municipio_sitio,"onUpdate:modelValue":s[6]||(s[6]=e=>F.value.municipio_sitio=e),style:{"margin-bottom":"20px"}},null,8,["modelValue"]),(0,a.bF)(h,{outlined:"",dense:"",label:"Latitud",modelValue:F.value.latitud_sitio,"onUpdate:modelValue":s[7]||(s[7]=e=>F.value.latitud_sitio=e),style:{"margin-bottom":"20px"}},null,8,["modelValue"])]),(0,a.Lk)("div",v,[(0,a.bF)(h,{outlined:"",dense:"",label:"Nombre",modelValue:F.value.nombre_sitio,"onUpdate:modelValue":s[8]||(s[8]=e=>F.value.nombre_sitio=e),style:{"margin-bottom":"20px"}},null,8,["modelValue"]),(0,a.bF)(h,{outlined:"",dense:"",label:"Calle",modelValue:F.value.calle_sitio,"onUpdate:modelValue":s[9]||(s[9]=e=>F.value.calle_sitio=e),style:{"margin-bottom":"20px"}},null,8,["modelValue"]),(0,a.bF)(h,{outlined:"",dense:"",label:"Colonia",modelValue:F.value.colonia_sitio,"onUpdate:modelValue":s[10]||(s[10]=e=>F.value.colonia_sitio=e),style:{"margin-bottom":"20px"}},null,8,["modelValue"]),(0,a.bF)(h,{outlined:"",dense:"",label:"Estado",modelValue:F.value.estado_sitio,"onUpdate:modelValue":s[11]||(s[11]=e=>F.value.estado_sitio=e),style:{"margin-bottom":"20px"}},null,8,["modelValue"]),(0,a.bF)(h,{outlined:"",dense:"",label:"Longitud",modelValue:F.value.longitud_sitio,"onUpdate:modelValue":s[12]||(s[12]=e=>F.value.longitud_sitio=e),style:{"margin-bottom":"20px"}},null,8,["modelValue"])])])])),_:1}),(0,a.bF)(T,{align:"right",style:{padding:"25px"}},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(I,{dense:"",label:"Cancelar",outline:"",color:"red"},null,512),[[z]]),(0,a.bF)(I,{dense:"",label:"Guardar",color:"blue",onClick:q})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)(N,{modelValue:V.value,"onUpdate:modelValue":s[14]||(s[14]=e=>V.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(R,{style:{padding:"10px 20px",width:"50%"}},{default:(0,a.k6)((()=>[(0,a.bF)(E,{class:"row items-center"},{default:(0,a.k6)((()=>[f])),_:1}),(0,a.bF)(T,{align:"right"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(I,{dense:"",outline:"",label:"Cancelar",color:"red"},null,512),[[z]]),(0,a.bF)(I,{dense:"",label:"Continuar",color:"blue",onClick:C})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}}};var k=o(4483),V=o(9055),F=o(2013),w=o(7316),h=o(8219),x=o(4427),C=o(3958),q=o(8973),A=o(9919),L=o(2659),U=o(1656),I=o(9204),Q=o(7231),P=o(1082),S=o.n(P);const K=y,R=K;S()(y,"components",{QCard:k.A,QSpace:V.A,QSelect:F.A,QInput:w.A,QIcon:h.A,QBtn:x.A,QTable:C.A,QTr:q.A,QTd:A.A,QDialog:L.A,QCardSection:U.A,QCardActions:I.A}),S()(y,"directives",{ClosePopup:Q.A})}}]);