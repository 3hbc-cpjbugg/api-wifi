(globalThis["webpackChunkclinica"]=globalThis["webpackChunkclinica"]||[]).push([[590],{1189:(e,o,t)=>{"use strict";t.d(o,{A:()=>r});var i=t(5319);class r extends i.A{resource(){return"config-site"}}},5319:(e,o,t)=>{"use strict";t.d(o,{A:()=>a});var i=t(6413),r=t(726);i.K.$http=r.api;class a extends i.K{baseURL(){return"https://wifisesa.sispro.mx/api"}request(e){return this.$http.request(e)}parameterNames(){const e=super.parameterNames(),o={limit:"per_page",include:"include",filter:"filter",sort:"sort",fields:"fields",append:"append",page:"page"};return{...e,...o}}formData(){return{indices:!0}}}},590:(e,o,t)=>{"use strict";t.r(o),t.d(o,{default:()=>P});var i=t(2852),r=t(3100),a=t(9006),s=t(1952),l=t.n(s);const n={key:0,class:"col-12 col-sm-12 col-md-4 self-center"},c={class:"row text-center"},d={class:"col-12"},u={key:0,fit:"fill",style:{"max-width":"192px",height:"192px"},src:l()},p=["src"],g={class:"row"},m={class:"col-12 q-pl-md q-pr-md"},h={class:"col-12 q-pl-md q-pr-md"},f={class:"col-12 q-pl-md q-pr-md q-pb-lg"},b={class:"col-12 text-center"};function y(e,o,t,s,l,y){const w=(0,i.g2)("q-input"),k=(0,i.g2)("q-icon"),q=(0,i.g2)("q-btn"),v=(0,i.g2)("q-card-section"),x=(0,i.g2)("q-card"),L=(0,i.g2)("q-layout");return(0,i.uX)(),(0,i.Wv)(L,null,{default:(0,i.k6)((()=>[(0,i.Lk)("div",{class:"row justify-center q-gutter-md",style:(0,r.Tr)(`min-height: inherit; background-color: ${null==s.configuration?"white":s.configuration.primary_color};height: 100%`)},[null!=s.configuration?((0,i.uX)(),(0,i.CE)("div",n,[(0,i.bF)(x,{flat:"",class:"q-ml-xl q-mr-xl",style:(0,r.Tr)(`background-color: ${s.configuration.secondary_color}`)},{default:(0,i.k6)((()=>[(0,i.bF)(v,null,{default:(0,i.k6)((()=>[(0,i.Lk)("div",c,[(0,i.Lk)("div",d,[s.configuration.logo?((0,i.uX)(),(0,i.CE)("img",{key:1,fit:"fill",style:{"max-width":"192px",height:"192px",width:"192px"},src:`${s.baseUrl}/${s.configuration.logo}`},null,8,p)):((0,i.uX)(),(0,i.CE)("img",u))])]),(0,i.Lk)("div",g,[(0,i.Lk)("div",m,[(0,i.bF)(w,{"label-color":"primary",outlined:"",dense:"",modelValue:s.email,"onUpdate:modelValue":o[0]||(o[0]=e=>s.email=e),label:"Ingrese correo electrónico",rules:[e=>e&&e.length>0||"* Campo requerido"]},null,8,["modelValue","rules"])]),(0,i.Lk)("div",h,[(0,i.bF)(w,{outlined:"","label-color":"primary",dense:"",onKeypress:o[2]||(o[2]=(0,a.jR)((e=>y.onLogin()),["enter"])),label:"Contraseña",modelValue:s.password,"onUpdate:modelValue":o[3]||(o[3]=e=>s.password=e),rules:[e=>e&&e.length>0||"* Campo requerido"],type:s.isPwd?"password":"text"},{append:(0,i.k6)((()=>[(0,i.bF)(k,{name:s.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:o[1]||(o[1]=e=>s.isPwd=!s.isPwd)},null,8,["name"])])),_:1},8,["modelValue","rules","type"])]),(0,i.Lk)("div",f,[(0,i.bF)(q,{style:(0,r.Tr)(`background-color: ${s.configuration.accept_button_color}; color: ${s.configuration.accept_button_text_color}`),class:"full-width",label:"Iniciar sesión",onClick:o[4]||(o[4]=e=>y.onLogin())},null,8,["style"])]),(0,i.Lk)("div",b,[(0,i.Lk)("p",{style:(0,r.Tr)(`color: ${s.configuration.text_color}`)},"¿Olvidaste tu contraseña?",4)])])])),_:1})])),_:1},8,["style"])])):(0,i.Q3)("",!0)],4)])),_:1})}t(6809);var w=t(2836),k=t(5124),q=t(726),v=t(4004),x=t(5475),L=t(1189);const _={setup(){const e=(0,k.KR)(""),o=(0,k.KR)(!0),t=(0,k.KR)(""),i=(0,w.rd)(),r=(0,v.A)(),a=(0,k.KR)("https://wifisesa.sispro.mx"),s=(0,k.KR)(null);return{password:e,isPwd:o,email:t,router:i,q:r,configuration:s,baseUrl:a}},beforeMount(){this.getConfiguration(),x.emitter.on("before-request",(e=>{this.showLoading()})),x.emitter.on("after-response",(e=>{this.hideLoading()}))},methods:{async getConfiguration(){const e=await L.A.find(1);this.configuration=e.data},showLoading(){this.q.loading.show()},hideLoading(){this.q.loading.hide()},async onLogin(){try{const{data:e}=await q.api.post("login",{email:this.email,password:this.password});if(!e.success)return void this.q.notify({message:e.message,color:"negative",position:"top-right",icon:"report_problem"});localStorage.token=e.data.token,localStorage.user=JSON.stringify(e.data.user),localStorage.login=!0,localStorage.rol=e.data.role,localStorage.configuration=JSON.stringify(e.data.configuration),q.api.defaults.headers.common["Authorization"]=`Bearer ${e.data.token}`,this.$gates.setRoles([localStorage.rol]),await this.router.push({name:"Dashboard.index"})}catch(e){this.q.notify({message:"El correo electrónico  y/o contraseña son incorrectos",color:"negative",position:"top-right",icon:"report_problem"})}}}};var C=t(6317),A=t(1391),$=t(4483),S=t(1656),K=t(7316),R=t(8219),Q=t(4427),F=t(1082),T=t.n(F);const V=(0,C.A)(_,[["render",y]]),P=V;T()(_,"components",{QLayout:A.A,QCard:$.A,QCardSection:S.A,QInput:K.A,QIcon:R.A,QBtn:Q.A})},1952:(e,o,t)=>{e.exports=t.p+"img/evidence_placeholder.20739530.png"}}]);